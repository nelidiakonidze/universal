
stages:
  - lint 
  - test 

language: node_js
node_js: '12'


install: 
    - git remote add upstream https://github.com/nelidiakonidze/universal.git
    - git fetch upstream master
    - yarn

cache:
  yarn: true
  directories:
    - node_modules


jobs:
  include:
    - script: COVERAGE=1 ng serve
      name: 'Latest Node.js (with coverage)'


    - &node
      script: npm start test.node
      node_js: '12'
      name: 'Node.js v12'

    
    - stage: lint
      script: ng lint
      name: 'lint'

    - stage: test
      script: ng test
      name: 'test'



env:
  - 'NODE_OPTIONS="--trace-warnings"'
